# REQ-003 Research Decisions

## Research Summary

**需求**: 分支命名优化 - 中文特性名自动转换为拼音
**调研完成时间**: 2025-12-16
**决策数量**: 3 已决策, 1 待定

---

## Decisions

### R001 — 技术方案选择

**Decision**: Python + pypinyin

**Rationale**:
1. 项目 `.claude/scripts/common.sh` 已有 Python3 调用 (validate_json_schema 函数)
2. pypinyin 是 Python 生态中最成熟的中文拼音转换库 (GitHub 5.5k+ stars)
3. 提供 `lazy_pinyin()` 函数直接返回无声调拼音列表，正好满足分支命名需求
4. 内置词组智能匹配，自动处理大部分多音字场景

**Alternatives considered**:
- Node.js + pinyin-pro: 功能丰富但需要引入 Node.js 运行时，项目当前未使用
- 纯 Bash + 拼音映射表: 无外部依赖但维护困难，无法处理多音字

---

### R002 — 多音字处理策略

**Decision**: 使用 pypinyin 默认词典，依赖词组智能匹配

**Rationale**:
1. pypinyin 使用 phrase-pinyin-data 词组数据，覆盖常见词组
2. 分支命名场景不需要 100% 准确，"可识别"即可
3. 后续如有特殊需求可通过 `load_phrases_dict()` 扩展

**Alternatives considered**:
- 自定义词典: 维护成本高，ROI 不足
- 强制用户指定拼音: 用户体验差，违背自动化初衷

---

### R003 — 繁体中文支持

**Decision**: 暂不显式支持，但利用 pypinyin 默认能力

**Rationale**:
1. cc-devflow 主要面向简体中文用户
2. pypinyin 默认支持繁体字转拼音
3. 不增加额外测试范围和文档负担

**Alternatives considered**:
- 显式支持繁体: 增加测试范围，当前无明确需求

---

## Source Library

### 内部资料
- [codebase-overview.md](internal/codebase-overview.md) - 现有代码分析

### 外部资料 (MCP 获取)
- [pypinyin-docs.md](mcp/20251216/official/pypinyin-docs.md) - pypinyin 官方文档
- [pinyin-pro-docs.md](mcp/20251216/official/pinyin-pro-docs.md) - pinyin-pro 文档 (对比参考)

### 在线资源
- https://github.com/mozillazg/python-pinyin
- https://pypi.org/project/pypinyin/
- https://pypinyin.readthedocs.io/

---

## Open Items

| ID | 问题 | Owner | 备注 |
|----|------|-------|------|
| R004 | pypinyin 依赖安装方式 | prd-writer | 需在 PRD 阶段确定用户故事 |

---

*Generated by /flow-init research consolidation*
