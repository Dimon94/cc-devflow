# Function Contract: slugify()

**Version**: 1.0.0
**Created**: 2025-12-16

---

## Function Signature

```bash
slugify <input_string>
```

## Parameters

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| `input_string` | string | YES | 待转换的字符串 |

## Return Value

| 类型 | 说明 |
|------|------|
| string | 符合 Git 分支命名规范的 slug |

## Output Constraints

- 仅包含 `[a-z0-9-]` 字符
- 不以 `-` 开头或结尾
- 无连续 `--`
- 最大长度: 250 字符 (Git 限制)

---

## Behavior Contract

### Case 1: Chinese Input (pypinyin available)

```
Input:  "用户登录功能"
Output: "yong-hu-deng-lu-gong-neng"
```

### Case 2: Mixed Input (pypinyin available)

```
Input:  "OAuth2认证"
Output: "oauth2-ren-zheng"
```

### Case 3: Chinese Input (pypinyin NOT available)

```
Input:  "用户登录"
Stderr: "Warning: pypinyin not installed. Chinese characters cannot be converted."
Output: "" (empty, due to Chinese removal)
```

### Case 4: English Input (any environment)

```
Input:  "User Login Feature"
Output: "user-login-feature"
```

### Case 5: Empty Input

```
Input:  ""
Output: ""
```

### Case 6: Special Characters

```
Input:  "测试@#$%功能"
Output: "ce-shi-gong-neng"
```

---

## Error Handling

| 错误场景 | 行为 |
|----------|------|
| pypinyin 未安装 | 输出警告到 stderr，降级处理 |
| Python3 不可用 | 回退到原有逻辑 |
| 输入为空 | 直接返回空字符串 |

---

## Side Effects

| 场景 | Side Effect |
|------|-------------|
| pypinyin 缺失 + 中文输入 | 写入 stderr 警告 |
| 其他情况 | 无 side effect |

---

## Compatibility

| 版本 | 兼容性 |
|------|--------|
| 改动前 | 纯英文输入行为 100% 一致 |
| 改动后 | 增加中文转拼音能力 |

---

**Generated by**: tech-architect agent
**Reference**: PRD.md Acceptance Criteria
