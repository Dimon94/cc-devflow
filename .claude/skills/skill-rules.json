{
    "version": "1.0",
    "description": "Skill activation triggers for CC-DevFlow. Controls when skills automatically suggest or block actions.",
    "skills": {
        "skill-developer": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "Meta-skill for creating and managing Claude Code skills",
            "promptTriggers": {
                "keywords": [
                    "skill system",
                    "create skill",
                    "add skill",
                    "skill triggers",
                    "skill rules",
                    "hook system",
                    "skill development",
                    "skill-rules.json"
                ],
                "intentPatterns": [
                    "(how do|how does|explain).*?skill",
                    "(create|add|modify|build).*?skill",
                    "skill.*?(work|trigger|activate|system)"
                ]
            }
        },
        "cc-devflow-orchestrator": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "CC-DevFlow workflow router and agent recommender. Routes users to correct commands/agents.",
            "promptTriggers": {
                "keywords": [
                    "devflow",
                    "requirement",
                    "REQ-",
                    "flow-init",
                    "flow-prd",
                    "flow-tech",
                    "flow-ui",
                    "flow-epic",
                    "flow-dev",
                    "flow-qa",
                    "flow-release",
                    "flow-verify",
                    "how to write PRD",
                    "how to design",
                    "how to plan tasks",
                    "create requirement",
                    "start requirement",
                    "workflow",
                    "phase gate"
                ],
                "intentPatterns": [
                    "(start|create|begin|init).*?(requirement|project|REQ)",
                    "(run|execute).*?(flow|command)",
                    "(how to|guide|explain).*?(PRD|EPIC|TASKS|design|prototype)",
                    "what is.*?(phase gate|workflow|orchestration_status)",
                    "(which|what).*?(command|flow|agent|next step)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "devflow/requirements/**/*.md",
                    "devflow/requirements/**/orchestration_status.json"
                ]
            }
        },
        "devflow-tdd-enforcer": {
            "type": "guardrail",
            "enforcement": "block",
            "priority": "critical",
            "description": "Enforces TDD order in TASKS.md - Tests MUST be marked complete before Implementation tasks",
            "fileTriggers": {
                "pathPatterns": [
                    "devflow/requirements/**/TASKS.md"
                ],
                "contentPatterns": [
                    "\\[x\\].*Implementation.*\\n.*\\[ \\].*Test",
                    "\\[x\\].*\\[US\\d+\\].*Implement.*\\n.*\\[ \\].*\\[US\\d+\\].*Test"
                ]
            },
            "blockMessage": "âš ï¸ BLOCKED - TDD Violation Detected\n\nğŸ“‹ REQUIRED ACTION:\n1. Re-order TASKS.md to follow TDD sequence\n2. Mark test tasks [x] BEFORE implementation tasks\n3. Review Constitution Article VI - Test-First Development\n\nReason: CC-DevFlow enforces TDD (Tests First â†’ Implementation)\nSource: planner agent mandate + Constitution Article VI\nFile: {file_path}\n\nCurrent Issue:\n  Implementation task marked complete\n  Test task NOT marked complete\n\nğŸ’¡ SKIP: Add `@skip-tdd-check` comment or set SKIP_TDD_ENFORCER=1",
            "skipConditions": {
                "sessionSkillUsed": true,
                "fileMarkers": [
                    "@skip-tdd-check"
                ],
                "envOverride": "SKIP_TDD_ENFORCER"
            }
        },
        "constitution-guardian": {
            "type": "guardrail",
            "enforcement": "block",
            "priority": "critical",
            "description": "Real-time Constitution compliance checker. Blocks partial implementations (Article I.1) and hardcoded secrets (Article III.1)",
            "fileTriggers": {
                "pathPatterns": [
                    "devflow/requirements/**/PRD.md",
                    "devflow/requirements/**/EPIC.md",
                    "devflow/requirements/**/TASKS.md",
                    "devflow/requirements/**/TECH_DESIGN.md",
                    "devflow/requirements/**/contracts/**/*.yaml",
                    "devflow/requirements/**/data-model.md"
                ],
                "contentPatterns": [
                    "TODO.*later",
                    "FIXME",
                    "\\[placeholder\\]",
                    "simplified for now",
                    "defer to v\\d",
                    "will complete in v\\d",
                    "API_KEY\\s*=\\s*['\"]?[a-zA-Z0-9_-]{10,}",
                    "SECRET\\s*=\\s*['\"]?[a-zA-Z0-9_-]+",
                    "PASSWORD\\s*=\\s*['\"]?[^\\s]+",
                    "TOKEN\\s*=\\s*['\"]?[a-zA-Z0-9_-]{10,}",
                    "apiKey:\\s*['\"][^'\"]+['\"]",
                    "password:\\s*['\"][^'\"]+['\"]",
                    "secret:\\s*['\"][^'\"]+['\"]"
                ]
            },
            "blockMessage": "âš ï¸ BLOCKED - Constitution Violation\n\nDetected:\n- Partial implementation (Article I.1 - NO PARTIAL IMPLEMENTATION)\n- OR Hardcoded secrets (Article III.1 - NO HARDCODED SECRETS)\n\nğŸ“‹ ACTION:\n1. Complete all TODOs/FIXMEs before saving\n2. Move secrets to environment variables (.env, not committed)\n3. Review .claude/rules/project-constitution.md v2.0.0\n4. Run /flow-verify for comprehensive check\n\nSource: Constitution Articles I.1, III.1\nFile: {file_path}\n\nğŸ’¡ SKIP: Add `@constitution-verified` comment or set SKIP_CONSTITUTION_CHECK=1",
            "skipConditions": {
                "sessionSkillUsed": true,
                "fileMarkers": [
                    "@constitution-verified"
                ],
                "envOverride": "SKIP_CONSTITUTION_CHECK"
            }
        },
        "fractal-docs-generator": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "åˆ†å½¢æ–‡æ¡£ç”Ÿæˆå™¨ã€‚åˆ›å»ºç›®å½•æ—¶è‡ªåŠ¨ç”Ÿæˆç›®å½•çº§ CLAUDE.mdï¼Œå®ç° GEB å¼é€’å½’æ¶æ„æ–‡æ¡£",
            "promptTriggers": {
                "keywords": [
                    "åˆ›å»ºç›®å½•",
                    "æ–°å»ºæ–‡ä»¶å¤¹",
                    "mkdir",
                    "add folder",
                    "create directory",
                    "ç›®å½•ç»“æ„",
                    "CLAUDE.md",
                    "æ¶æ„æ–‡æ¡£",
                    "åˆ†å½¢æ–‡æ¡£"
                ],
                "intentPatterns": [
                    "(åˆ›å»º|æ–°å»º|æ·»åŠ ).*?(ç›®å½•|æ–‡ä»¶å¤¹|folder|directory)",
                    "(mkdir|create|add).*?(folder|directory|dir)",
                    "ç›®å½•.*?(ç»“æ„|å˜æ›´|è°ƒæ•´)",
                    "(æ›´æ–°|åŒæ­¥).*?CLAUDE\\.md"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "**/CLAUDE.md"
                ]
            }
        },
        "file-header-guardian": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "æ–‡ä»¶å¤´æ³¨é‡Šå®ˆæŠ¤è€…ã€‚åˆ›å»º/ä¿®æ”¹ä»£ç æ–‡ä»¶æ—¶ç¡®ä¿ @input/@output/@pos ä¸‰è¡Œå¥‘çº¦æ³¨é‡Šå­˜åœ¨",
            "promptTriggers": {
                "keywords": [
                    "åˆ›å»ºæ–‡ä»¶",
                    "æ–°å»ºæ–‡ä»¶",
                    "write file",
                    "create file",
                    "add file",
                    "æ–‡ä»¶å¤´æ³¨é‡Š",
                    "å¤´æ³¨é‡Š",
                    "@input",
                    "@output",
                    "@pos"
                ],
                "intentPatterns": [
                    "(åˆ›å»º|æ–°å»º|æ·»åŠ |ç¼–å†™).*?(æ–‡ä»¶|æ¨¡å—|ç»„ä»¶)",
                    "(create|write|add).*?(file|module|component)",
                    "(æ£€æŸ¥|æ›´æ–°|æ·»åŠ ).*?(å¤´æ³¨é‡Š|header comment)",
                    "æ–‡ä»¶.*?(æ³¨é‡Š|documentation)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "**/*.ts",
                    "**/*.tsx",
                    "**/*.js",
                    "**/*.jsx",
                    "**/*.py",
                    "**/*.go",
                    "**/*.rs",
                    "**/*.sh"
                ],
                "pathExclusions": [
                    "**/*.test.ts",
                    "**/*.spec.ts",
                    "**/*.d.ts",
                    "**/node_modules/**",
                    "**/.claude/**"
                ]
            }
        },
        "devflow-file-standards": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "medium",
            "description": "File naming conventions, directory structure, and YAML frontmatter standards for CC-DevFlow",
            "promptTriggers": {
                "keywords": [
                    "REQ-ID format",
                    "requirement ID",
                    "task ID",
                    "directory structure",
                    "file naming",
                    "orchestration_status",
                    "YAML frontmatter",
                    "contract file",
                    "where does PRD go",
                    "file standards"
                ],
                "intentPatterns": [
                    "what is.*?(format|pattern).*?(REQ|task|requirement|ID)",
                    "where (does|should).*?(PRD|EPIC|TASKS|file|document)",
                    "(how to|what is).*?(name|structure|organize).*?file",
                    "what fields.*?(orchestration_status|frontmatter|YAML)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "devflow/requirements/**/*.md",
                    "devflow/requirements/**/orchestration_status.json",
                    "devflow/requirements/**/contracts/**"
                ]
            }
        },
        "devflow-constitution-quick-ref": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "medium",
            "description": "Quick reference guide to CC-DevFlow Constitution v2.0.0 with links to full text",
            "promptTriggers": {
                "keywords": [
                    "constitution",
                    "constitutional",
                    "article",
                    "phase -1 gate",
                    "simplicity gate",
                    "anti-abstraction",
                    "integration-first",
                    "TDD mandate",
                    "quality first",
                    "security first",
                    "no partial implementation",
                    "no hardcoded secrets"
                ],
                "intentPatterns": [
                    "what is.*?(constitution|article|phase -1|gate)",
                    "(explain|show|tell me).*?(constitution|article)",
                    "can I.*?(TODO|hardcode|BaseController|abstraction)",
                    "should I.*?(test first|write implementation)"
                ]
            }
        },
        "journey-coherence-checker": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "Use when completing a requirement, checking milestone progress, or asking about project status. Detects gaps between requirements, unmet dependencies, and cumulative scope drift.",
            "promptTriggers": {
                "keywords": [
                    "éœ€æ±‚å®Œæˆ",
                    "REQå®Œæˆ",
                    "é‡Œç¨‹ç¢‘",
                    "milestone",
                    "é¡¹ç›®è¿›åº¦",
                    "å¯ä»¥å‘å¸ƒ",
                    "å‘å¸ƒå‰æ£€æŸ¥",
                    "å…¨å±€æ£€æŸ¥",
                    "M1è¿›åº¦",
                    "M2è¿›åº¦",
                    "M3è¿›åº¦",
                    "M4è¿›åº¦",
                    "æ‰€æœ‰éœ€æ±‚",
                    "ä¾èµ–æ»¡è¶³",
                    "journey check",
                    "coherence check"
                ],
                "intentPatterns": [
                    "(éœ€æ±‚|REQ|requirement).*?(å®Œæˆ|done|finished)",
                    "(é‡Œç¨‹ç¢‘|milestone).*?(è¿›åº¦|status|å®Œæˆ)",
                    "(é¡¹ç›®|project).*?(è¿›åº¦|status|å¦‚ä½•)",
                    "(å¯ä»¥|ready).*?(å‘å¸ƒ|release)",
                    "(æ‰€æœ‰|all).*?(éœ€æ±‚|requirement).*?(å®Œæˆ|done)",
                    "(æ£€æŸ¥|check).*?(å…¨å±€|global|ä¾èµ–|dependency)"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "devflow/ROADMAP.md",
                    "devflow/requirements/**/orchestration_status.json"
                ]
            }
        },
        "npm-release": {
            "type": "domain",
            "enforcement": "suggest",
            "priority": "high",
            "description": "Standardized release process for cc-devflow npm package. Handles version bumping, changelog updates, and publishing checks.",
            "promptTriggers": {
                "keywords": [
                    "publish npm",
                    "release version",
                    "npm publish",
                    "bump version",
                    "new release",
                    "publish package",
                    "update changelog",
                    "release workflow"
                ],
                "intentPatterns": [
                    "(publish|release).*?(npm|package|version)",
                    "(bump|update).*?(version|semver)",
                    "(create|generate).*?(release|changelog)",
                    "ready to publish",
                    "deploy to npm"
                ]
            },
            "fileTriggers": {
                "pathPatterns": [
                    "package.json",
                    "CHANGELOG.md"
                ]
            }
        }
    },
    "notes": {
        "enforcement_types": {
            "suggest": "Skill suggestion appears but doesn't block execution",
            "block": "Requires skill to be used before proceeding (guardrail)",
            "warn": "Shows warning but allows proceeding"
        },
        "priority_levels": {
            "critical": "Highest - Always trigger when matched, can block operations",
            "high": "Important - Trigger for most matches",
            "medium": "Moderate - Trigger for clear matches",
            "low": "Optional - Trigger only for explicit matches"
        },
        "cc_devflow_customization": {
            "pathPatterns": "All patterns match devflow/requirements/** structure",
            "keywords": "CC-DevFlow specific terms (REQ-, flow-*, constitution, etc.)",
            "guardra ils": "devflow-tdd-enforcer and constitution-guardian are critical guardrails",
            "skip_conditions": "All guardrails support session skip, file markers, and env override"
        }
    }
}