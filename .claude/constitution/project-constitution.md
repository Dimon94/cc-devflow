# CC-DevFlow 项目宪法

> **版本**: v1.0
> **生效日期**: 2025-01-20
> **修订日期**: 待定
> **状态**: 生效中

---

## 📜 宪法总纲

CC-DevFlow 项目宪法是本项目开发过程中的**最高行为准则**，所有代理（主代理和子代理）、工具、流程均必须严格遵守。本宪法旨在确保开发过程的**质量、一致性、安全性和可维护性**。

### 宪法权威性
1. **最高优先级**: 宪法原则高于所有其他规则和约定
2. **不可违背**: 任何代理或流程不得违背宪法原则
3. **持续约束**: 宪法在整个项目生命周期内持续有效
4. **普遍适用**: 适用于所有需求、所有阶段、所有代理

---

## 🏛️ 核心原则

### 原则一：质量至上 (Quality First)
**宗旨**: 质量是不可妥协的底线

#### 具体约束
- **NO PARTIAL IMPLEMENTATION**: 禁止任何形式的部分实现或占位符代码
- **NO SIMPLIFICATION**: 禁止"暂时简化，后续完善"的做法
- **COMPLETE OR NOTHING**: 要么完整实现，要么不实现
- **测试覆盖**: 每个函数必须有对应的测试，覆盖率不低于80%

#### 执行标准
```yaml
质量检查点:
  - 代码完整性: 100%
  - 测试覆盖率: ≥80%
  - 类型检查: 通过
  - 安全扫描: 无高危风险
  - 文档完整性: 完整
```

---

### 原则二：架构一致性 (Architectural Consistency)
**宗旨**: 保持代码库的统一性和可预测性

#### 具体约束
- **NO CODE DUPLICATION**: 严禁代码重复，必须复用现有函数和常量
- **CONSISTENT NAMING**: 遵循现有代码库的命名模式
- **NO OVER-ENGINEERING**: 禁止过度工程化，简单问题用简单方案
- **SINGLE RESPONSIBILITY**: 严格遵循单一职责原则

#### 执行标准
- 新代码必须符合现有架构模式
- 函数命名必须遵循已有约定
- 不得引入不必要的抽象层
- 每个模块职责清晰且单一

---

### 原则三：安全优先 (Security First)
**宗旨**: 安全是开发的基础要求，不可事后补救

#### 具体约束
- **NO HARDCODED SECRETS**: 禁止硬编码密钥、密码、令牌
- **INPUT VALIDATION**: 所有外部输入必须验证
- **PERMISSION PRINCIPLE**: 最小权限原则
- **SECURE BY DEFAULT**: 默认安全配置

#### 执行标准
- 所有敏感信息通过环境变量或安全存储
- 输入验证覆盖所有外部数据
- 权限检查贯穿整个流程
- 定期安全扫描无高危问题

---

### 原则四：性能责任 (Performance Accountability)
**宗旨**: 性能是用户体验的基础，必须主动优化

#### 具体约束
- **NO RESOURCE LEAKS**: 禁止资源泄露（连接、文件句柄、内存等）
- **EFFICIENT ALGORITHMS**: 选择合适的算法和数据结构
- **LAZY LOADING**: 按需加载，避免不必要的资源消耗
- **CACHING STRATEGY**: 合理使用缓存机制

#### 执行标准
- 所有资源使用后必须正确释放
- 算法复杂度合理
- 避免不必要的重复计算
- 关键路径性能监控

---

### 原则五：可维护性 (Maintainability)
**宗旨**: 代码必须便于理解、修改和扩展

#### 具体约束
- **NO DEAD CODE**: 禁止死代码，要么使用要么删除
- **CLEAR SEPARATION**: 清晰的关注点分离
- **DOCUMENTATION**: 复杂逻辑必须有文档说明
- **FILE SIZE LIMIT**: 单文件不超过500行

#### 执行标准
- 代码自解释，复杂逻辑有注释
- 模块间依赖关系清晰
- 配置与代码分离
- 遵循KISS、YAGNI、SOLID原则

---

## 🔒 不可变约束

### 开发流程约束
1. **必须遵循工作流**: 所有开发必须通过 `/flow-new` 等标准流程
2. **质量闸不可跳过**: 预推送检查、测试、安全扫描等必须通过
3. **文档驱动**: 重要决策必须文档化
4. **版本控制**: 所有变更必须通过Git管理

### 代理行为约束
1. **主代理职责**: 只有主代理可执行代码修改操作
2. **子代理职责**: 子代理只能进行研究分析和输出文档
3. **协作原则**: 代理间必须协调，避免冲突
4. **错误处理**: 遇到错误必须停止并报告，不得忽略

### 技术选择约束
1. **现有技术栈**: 优先使用项目已有的技术和工具
2. **兼容性要求**: 新功能必须向后兼容
3. **依赖管理**: 新增依赖必须经过评估
4. **标准遵循**: 遵循行业最佳实践和标准

---

## ⚖️ 违宪后果

### 轻度违宪
- **表现**: 代码风格不一致、文档缺失等
- **后果**: 要求立即修正，重新审查

### 中度违宪
- **表现**: 部分实现、测试缺失、安全风险等
- **后果**: 阻止提交，强制修复

### 重度违宪
- **表现**: 硬编码密钥、资源泄露、架构破坏等
- **后果**: 立即回滚，全面检查

---

## 🔄 宪法演进

### 修订原则
1. **慎重修订**: 宪法修订必须慎重，充分论证
2. **向后兼容**: 修订不得破坏现有承诺
3. **社区共识**: 重大修订需要广泛讨论
4. **版本管理**: 所有修订都有版本记录

### 修订流程
1. 提出修订提案，说明理由
2. 社区讨论和评估影响
3. 试验性实施和验证
4. 正式发布新版本宪法

---

## 📋 宪法检查清单

### 代码提交前检查
- [ ] 是否完整实现，无部分实现？
- [ ] 是否有对应测试，覆盖率足够？
- [ ] 是否复用现有代码，无重复？
- [ ] 是否遵循命名约定？
- [ ] 是否存在安全风险？
- [ ] 是否正确处理资源？
- [ ] 是否有死代码需要清理？
- [ ] 文件大小是否合理？

### 流程执行检查
- [ ] 是否通过标准工作流？
- [ ] 是否通过所有质量闸？
- [ ] 是否有完整文档？
- [ ] 是否正确版本控制？

---

**声明**: 本宪法是 CC-DevFlow 项目的最高准则，所有参与者都有责任遵守和维护。违反宪法的行为将被视为对项目质量和可持续性的威胁。

---

*CC-DevFlow 项目宪法 - 确保卓越，拒绝妥协*
